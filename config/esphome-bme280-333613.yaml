esphome:
  # location: downstairs living room
  name: "esphome-bme280-333613"
  friendly_name: "esphome-bme280-333613"

esp8266:
  board: esp01_1m

# Enable logging
logger:
  level: DEBUG
  baud_rate: 115200

# Enable Home Assistant API
api:

ota:
  - platform: esphome
    password: !secret ota_password

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password
  # Enable fallback hotspot (captive portal) in case wifi connection fails
  ap:
    ssid: "Esphome-Bme280 Fallback Hotspot"

captive_portal:

web_server:
  port: 80
  # Enable the web server with the latest version 3.0
  version: 3

# ha restart button
button:
  - platform: restart
    name: "Device Restart"

# i2c is at d5/d6
i2c:
  sda: GPIO12
  scl: GPIO14
  scan: false
  id: bus_i2c

# generic device info
text_sensor:
- platform: wifi_info
  ip_address:
    name: "IP Address"
- platform: version
  name: "ESPHome Version"

# BME 280 at i2c
sensor:
  - platform: bme280_i2c
    address: 0x76
    temperature:
      name: "BME280 Temperature"
    pressure:
      name: "BME280 Pressure"
    humidity:
      name: "BME280 Humidity"

# wifi sensor
  - platform: wifi_signal
    name: WiFi Signal
    id: device_wifi_signal
    entity_category: diagnostic
    update_interval: 60s

# uptime sensor
  - platform: uptime
    name: Uptime
    id: device_uptime
    entity_category: diagnostic
    accuracy_decimals: 0
    unit_of_measurement: min
    update_interval: 60s
    filters:
      - lambda: return x / 60;
